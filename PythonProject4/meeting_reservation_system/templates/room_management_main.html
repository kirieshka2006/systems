<!DOCTYPE html>
<html>
<head>
    <title>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–Ω–∞—Ç–∞–º–∏</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: #1a1a1a;
            color: #e0e0e0;
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
        }
        .header-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }
        .back-btn {
            background: #6c757d;
            color: white;
            padding: 10px 20px;
            text-decoration: none;
            border-radius: 8px;
        }
        .categories-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        .category-card {
            background: #2d2d2d;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            border: 2px solid #404040;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
            color: inherit;
            display: block;
        }
        .category-card:hover {
            transform: translateY(-5px);
            border-color: #007bff;
        }
        .category-icon {
            font-size: 40px;
            margin-bottom: 10px;
        }
        .category-count {
            color: #007bff;
            font-size: 20px;
            font-weight: bold;
            margin: 8px 0;
        }
        .btn-create {
            background: #28a745;
            color: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            text-decoration: none;
            display: block;
            font-size: 16px;
            font-weight: bold;
            border: 2px solid #28a745;
            transition: all 0.3s;
        }
        .btn-create:hover {
            background: #218838;
            border-color: #218838;
            transform: translateY(-3px);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header-actions">
            <a href="{% url 'home' %}" class="back-btn">‚Üê –ù–∞–∑–∞–¥ –Ω–∞ –≥–ª–∞–≤–Ω—É—é</a>
            <h1>üö™ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–Ω–∞—Ç–∞–º–∏</h1>
            <div style="width: 140px;"></div>
        </div>

        <div class="categories-grid">
            <a href="{% url 'room_management_category' 'economy' %}" class="category-card">
                <div class="category-icon">üü¢</div>
                <h3>–≠–∫–æ–Ω–æ–º</h3>
                <div class="category-count">{{ categories.economy }}</div>
                <small>–∫–æ–º–Ω–∞—Ç</small>
            </a>

            <a href="{% url 'room_management_category' 'standard' %}" class="category-card">
                <div class="category-icon">üîµ</div>
                <h3>–°—Ç–∞–Ω–¥–∞—Ä—Ç</h3>
                <div class="category-count">{{ categories.standard }}</div>
                <small>–∫–æ–º–Ω–∞—Ç</small>
            </a>

            <a href="{% url 'room_management_category' 'comfort' %}" class="category-card">
                <div class="category-icon">üü°</div>
                <h3>–ö–æ–º—Ñ–æ—Ä—Ç</h3>
                <div class="category-count">{{ categories.comfort }}</div>
                <small>–∫–æ–º–Ω–∞—Ç</small>
            </a>

            <a href="{% url 'room_management_category' 'vip' %}" class="category-card">
                <div class="category-icon">üü£</div>
                <h3>VIP</h3>
                <div class="category-count">{{ categories.vip }}</div>
                <small>–∫–æ–º–Ω–∞—Ç</small>
            </a>

            <a href="{% url 'room_management_category' 'luxury' %}" class="category-card">
                <div class="category-icon">üî¥</div>
                <h3>–õ—é–∫—Å</h3>
                <div class="category-count">{{ categories.luxury }}</div>
                <small>–∫–æ–º–Ω–∞—Ç</small>
            </a>

            <a href="javascript:void(0)" onclick="showAddRoomForm()" class="btn-create">
                ‚ûï –°–æ–∑–¥–∞—Ç—å –∫–æ–º–Ω–∞—Ç—É
            </a>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–º–Ω–∞—Ç—ã -->
    <div id="roomModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000;">
        <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: #2d2d2d; padding: 30px; border-radius: 15px; width: 90%; max-width: 500px; border: 1px solid #404040;">
            <h3>‚ûï –°–æ–∑–¥–∞—Ç—å –∫–æ–º–Ω–∞—Ç—É</h3>
            <form id="roomForm" enctype="multipart/form-data">
                {% csrf_token %}
                <div style="display: grid; gap: 15px; margin: 20px 0;">
                    <input type="text" name="name" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–Ω–∞—Ç—ã" required>
                    <input type="text" name="location" placeholder="–ú–µ—Å—Ç–æ—Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ" required>

                    <select name="category" required>
                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é</option>
                        <option value="economy">üü¢ –≠–∫–æ–Ω–æ–º</option>
                        <option value="standard">üîµ –°—Ç–∞–Ω–¥–∞—Ä—Ç</option>
                        <option value="comfort">üü° –ö–æ–º—Ñ–æ—Ä—Ç</option>
                        <option value="vip">üü£ VIP</option>
                        <option value="luxury">üî¥ –õ—é–∫—Å</option>
                    </select>

                    <input type="number" name="capacity" placeholder="–í–º–µ—Å—Ç–∏–º–æ—Å—Ç—å" min="1" required>
                    <input type="number" name="price_per_hour" placeholder="–¶–µ–Ω–∞ –∑–∞ —á–∞—Å" step="100" required>
                    <textarea name="equipment" placeholder="–û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ" rows="3"></textarea>
                    <input type="file" name="image" accept="image/*">
                </div>
                <div style="display: flex; gap: 10px; justify-content: flex-end;">
                    <button type="button" onclick="closeModal()" class="back-btn">–û—Ç–º–µ–Ω–∞</button>
                    <button type="submit" class="btn-apply" style="background: #28a745; color: white; padding: 10px 20px; border: none; border-radius: 6px; cursor: pointer;">–°–æ–∑–¥–∞—Ç—å</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        function showAddRoomForm() {
            document.getElementById('roomModal').style.display = 'block';
        }

        function closeModal() {
            document.getElementById('roomModal').style.display = 'none';
        }

        document.getElementById('roomForm').addEventListener('submit', function(e) {
            e.preventDefault();

            const formData = new FormData(this);

            fetch('/api/add-room/', {
                method: 'POST',
                body: formData,
                headers: {
                    'X-CSRFToken': document.querySelector('[name=csrfmiddlewaretoken]').value
                }
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    location.reload();
                } else {
                    alert('–û—à–∏–±–∫–∞: ' + data.error);
                }
            });
        });

        window.onclick = function(event) {
            const modal = document.getElementById('roomModal');
            if (event.target === modal) {
                closeModal();
            }
        }
    </script>
</body>
</html>