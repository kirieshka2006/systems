<!DOCTYPE html>
<html>
<head>
    <title>–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–≥–æ–≤–æ—Ä–æ–≤</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: #1a1a1a;
            color: #e0e0e0;
            min-height: 100vh;
        }
        .header {
            background: #2d2d2d;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 25px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            border: 1px solid #404040;
        }
        .room-card {
            background: #2d2d2d;
            padding: 25px;
            margin: 0 0 20px 0;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            border: 1px solid #404040;
            transition: transform 0.3s, box-shadow 0.3s;
        }
        .room-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.4);
        }
        .btn {
            background: #007bff;
            color: white;
            padding: 12px 20px;
            text-decoration: none;
            border-radius: 8px;
            border: none;
            font-size: 14px;
            cursor: pointer;
            transition: background 0.3s;
            display: inline-block;
        }
        .btn:hover {
            background: #0056b3;
        }
        .nav {
            margin-bottom: 20px;
        }
        h1 {
            color: #ffffff;
            margin-bottom: 20px;
        }

        .room-features {
            display: flex;
            gap: 15px;
            margin: 15px 0;
            flex-wrap: wrap;
        }
        .feature {
            background: #3a3a3a;
            padding: 8px 12px;
            border-radius: 20px;
            font-size: 12px;
            border: 1px solid #555;
        }

        /* –°–¢–ò–õ–ò –î–õ–Ø –°–í–û–†–ê–ß–ò–í–ê–Æ–©–ï–ì–û–°–Ø –ë–û–ö–û–í–û–ì–û –ú–ï–ù–Æ */
        .main-container {
            display: flex;
            gap: 15px; /* –î–û–ë–ê–í–ò–õ –û–¢–°–¢–£–ü –ú–ï–ñ–î–£ –ú–ï–ù–Æ –ò –ö–û–ù–¢–ï–ù–¢–û–ú */
            align-items: flex-start;
        }
        .sidebar {
            width: 60px;
            flex-shrink: 0;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            position: relative;
        }
        .sidebar:hover {
            width: 250px;
            z-index: 1000;
        }
        .sidebar .menu-text,
        .sidebar .menu-description,
        .sidebar .user-text,
        .sidebar .logout-btn {
            display: none;
        }
        .sidebar:hover .menu-text,
        .sidebar:hover .menu-description,
        .sidebar:hover .user-text,
        .sidebar:hover .logout-btn {
            display: block;
        }
        .content {
            flex: 1;
            min-width: 0;
            overflow: hidden;
            margin-left: 0;
            padding-top: 0;
        }

        /* –ú–ï–ù–Æ */
        .dashboard {
            display: flex;
            flex-direction: column;
            gap: 8px;
            flex: 1;
        }
        .dashboard-item {
            background: #2d2d2d;
            padding: 12px;
            border-radius: 8px;
            border: 1px solid #404040;
            transition: all 0.3s ease;
            cursor: pointer;
            text-decoration: none;
            color: inherit;
            display: flex;
            align-items: flex-start;
            gap: 12px;
            min-height: auto;
            overflow: hidden;
        }
        .dashboard-item:hover {
            background: #3a3a3a;
            transform: translateX(3px);
        }
        .dashboard-item .icon {
            font-size: 18px;
            min-width: 24px;
            text-align: center;
            margin-top: 0;
            flex-shrink: 0;
        }
        .menu-content {
            flex: 1;
            min-width: 0;
            overflow: hidden;
        }
        .dashboard-item .menu-text {
            color: #ffffff;
            font-size: 14px;
            font-weight: bold;
            display: block;
            margin-bottom: 4px;
            line-height: 1.2;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        .dashboard-item .menu-description {
            color: #cccccc;
            font-size: 11px;
            display: block;
            line-height: 1.3;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        /* –ë–õ–û–ö –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø –í –û–ë–©–ï–ô –°–ï–¢–ö–ï */
        .user-section {
            background: #2d2d2d;
            padding: 12px;
            border-radius: 8px;
            border: 1px solid #404040;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        .user-main {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            margin-bottom: 0;
        }
        .user-avatar {
            font-size: 18px;
            margin-top: 0;
            flex-shrink: 0;
        }
        .user-info {
            flex: 1;
            min-width: 0;
            overflow: hidden;
        }
        .user-name {
            color: #ffffff;
            font-size: 14px;
            font-weight: bold;
            margin: 0 0 4px 0;
            line-height: 1.2;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        .user-details {
            font-size: 11px;
            color: #999;
            margin: 2px 0;
            line-height: 1.3;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        .logout-btn {
            background: #dc3545;
            color: white;
            padding: 8px 12px;
            text-decoration: none;
            border-radius: 6px;
            border: none;
            width: 90%;
            text-align: center;
            cursor: pointer;
            transition: background 0.3s;
            font-size: 12px;
            font-weight: bold;
            display: block;
            white-space: nowrap;
            overflow: hidden;
        }
        .logout-btn:hover {
            background: #c82333;
        }

        /* –ö–û–ù–¢–ï–ô–ù–ï–† –î–õ–Ø –ö–û–ú–ù–ê–¢ */
        .rooms {
            max-width: 100%;
        }
        .booking-section {
    background: #2d2d2d;
    padding: 25px;
    border-radius: 15px;
    margin-bottom: 25px;
    border: 1px solid #404040;
}

.booking-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 25px;
}

.booking-header h2 {
    color: #fff;
    margin: 0;
}

.back-btn {
    background: #6c757d;
    color: white;
    padding: 10px 20px;
    text-decoration: none;
    border-radius: 8px;
    border: none;
    cursor: pointer;
    font-size: 14px;
    display: inline-flex;
    align-items: center;
    gap: 8px;
}

.back-btn:hover {
    background: #5a6268;
}

.booking-filters {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 15px;
    margin-bottom: 25px;
    padding: 20px;
    background: #3a3a3a;
    border-radius: 10px;
}

.filter-group {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.filter-group label {
    color: #ccc;
    font-size: 12px;
    font-weight: bold;
}

.filter-group select,
.filter-group input {
    padding: 10px;
    background: #2d2d2d;
    border: 1px solid #555;
    border-radius: 6px;
    color: #fff;
}

.btn-apply {
    background: #007bff;
    color: white;
    padding: 10px 20px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-weight: bold;
    align-self: end;
}

.btn-apply:hover {
    background: #0056b3;
}

.rooms-grid {
    display: grid;
    gap: 15px;
}

.room-card-booking {
    background: #3a3a3a;
    padding: 20px;
    border-radius: 10px;
    border: 1px solid #555;
}

.room-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
}

.room-name {
    color: #fff;
    font-size: 18px;
    font-weight: bold;
}

.room-capacity {
    color: #007bff;
    font-size: 14px;
}

.time-slots {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
    gap: 8px;
    margin-top: 15px;
}

.time-slot {
    padding: 8px;
    text-align: center;
    border-radius: 6px;
    cursor: pointer;
    font-size: 12px;
    border: 1px solid #555;
}

.time-slot.free {
    background: #28a745;
    color: white;
}

.time-slot.booked {
    background: #dc3545;
    color: white;
    cursor: not-allowed;
}

.time-slot.selected {
    background: #007bff;
    color: white;
}

.time-slot.pending {
    background: #ffc107;
    color: black;
}

.admin-dropdown {
    position: relative;
    display: inline-block;
}

.admin-menu-btn {
    background: #6c757d;
    color: white;
    padding: 10px 15px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-size: 14px;
    display: flex;
    align-items: center;
    gap: 5px;
}

.admin-menu-btn:hover {
    background: #5a6268;
}

.admin-dropdown-content {
    display: none;
    position: absolute;
    right: 0;
    background: #2d2d2d;
    min-width: 200px;
    border: 1px solid #404040;
    border-radius: 8px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.3);
    z-index: 1000;
    margin-top: 5px;
}

.admin-dropdown-content a {
    color: #e0e0e0;
    padding: 12px 16px;
    text-decoration: none;
    display: block;
    border-bottom: 1px solid #404040;
    font-size: 14px;
}

.admin-dropdown-content a:hover {
    background: #3a3a3a;
    color: #007bff;
}

.admin-dropdown-content a:last-child {
    border-bottom: none;
}

.dropdown-divider {
    height: 1px;
    background: #404040;
    margin: 5px 0;
}

.admin-dropdown:hover .admin-dropdown-content {
    display: block;
}

.admin-dropdown-top {
    position: relative;
    display: inline-block;
    margin-left: auto;
}

.admin-menu-btn-top {
    background: #6c757d;
    color: white;
    padding: 10px 12px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-size: 16px;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
}

.admin-menu-btn-top:hover {
    background: #5a6268;
    transform: rotate(90deg);
    transition: transform 0.3s ease;
}

.admin-dropdown-content-top {
    display: none;
    position: absolute;
    right: 0;
    top: 100%;
    background: #2d2d2d;
    min-width: 220px;
    border: 1px solid #404040;
    border-radius: 8px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.3);
    z-index: 1000;
    margin-top: 5px;
}

.admin-dropdown-content-top a {
    color: #e0e0e0;
    padding: 12px 16px;
    text-decoration: none;
    display: block;
    border-bottom: 1px solid #404040;
    font-size: 14px;
}

.admin-dropdown-content-top a:hover {
    background: #3a3a3a;
    transform: translateX(-5px);
    border-left: 3px solid #007bff;
    padding-left: 13px;
    transition: all 0.2s ease;
    color: #e0e0e0;
}

.admin-dropdown-content-top a:last-child {
    border-bottom: none;
}

.admin-dropdown-top:hover .admin-dropdown-content-top {
    display: block;
}
.admin-dropdown-content-top {
    display: none;
    position: absolute;
    right: 0;
    top: 100%;
    background: #2d2d2d;
    min-width: 220px;
    border: 1px solid #404040;
    border-radius: 8px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.3);
    z-index: 1000;
    margin-top: 5px;
    /* ‚òÖ‚òÖ‚òÖ –î–û–ë–ê–í–ò–ú –ü–†–û–ú–ï–ñ–£–¢–û–ö –ú–ï–ñ–î–£ –®–ï–°–¢–ï–†–Å–ù–ö–û–ô –ò –ú–ï–ù–Æ ‚òÖ‚òÖ‚òÖ */
    padding-top: 10px;
}

.admin-dropdown-content-top::before {
    content: '';
    position: absolute;
    top: -10px;
    right: 0;
    width: 100%;
    height: 10px;
    background: transparent;
}

.admin-dropdown-top:hover .admin-dropdown-content-top {
    display: block;
    animation: fadeIn 0.2s ease-in;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(-5px); }
    to { opacity: 1; transform: translateY(0); }
}

    </style>
</head>
<body>
<div class="header">
    <div style="display: flex; justify-content: space-between; align-items: flex-start;">
        <div style="flex: 1;">
            <h1>üè¢ –°–∏—Å—Ç–µ–º–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –ø–µ—Ä–µ–≥–æ–≤–æ—Ä–Ω—ã—Ö –∫–æ–º–Ω–∞—Ç</h1>
            {% if messages %}
            <div class="messages">
                {% for message in messages %}
                {% if "–≤—ã—à–ª–∏" in message|lower %}
                <div style="
                    background: #28a745;
                    color: white;
                    padding: 10px;
                    border-radius: 5px;
                    margin-bottom: 15px;
                    text-align: center;
                ">
                    {{ message }}
                </div>
                {% endif %}
                {% endfor %}
            </div>
            {% endif %}
        </div>

        <!-- ‚òÖ‚òÖ‚òÖ –®–ï–°–¢–ï–†–Å–ù–ö–ê –£–ü–†–ê–í–õ–ï–ù–ò–Ø –í –ü–†–ê–í–û–ú –í–ï–†–•–ù–ï–ú –£–ì–õ–£ ‚òÖ‚òÖ‚òÖ -->
        {% if user.is_authenticated and user.role in 'admin manager' %}
        <div class="admin-dropdown-top">
            <button class="admin-menu-btn-top">‚öôÔ∏è</button>
            <div class="admin-dropdown-content-top">
                {% if user.role == 'admin' %}
                <a href="{% url 'admin_panel' %}">üë• –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</a>
                <a href="javascript:void(0)" onclick="showRoomManagement()">üö™ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–Ω–∞—Ç–∞–º–∏</a>
                <div class="dropdown-divider"></div>
                {% endif %}
                <a href="{% url 'manager_panel' %}">üìã –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π</a>
                <a href="javascript:void(0)" onclick="showStatistics()">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</a>
            </div>
        </div>
        {% endif %}
    </div>

    <div class="nav">
        {% if user.is_authenticated %}
        <p>üëã –ü—Ä–∏–≤–µ—Ç, <strong>{{ user.username }}</strong>!</p>
        {% else %}
        <a href="{% url 'login' %}" class="btn">üîê –í–æ–π—Ç–∏</a>
        <a href="{% url 'register' %}" class="btn">üìù –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
        {% endif %}
    </div>
</div>
    {% if user.is_authenticated %}
    <!-- –û–°–ù–û–í–ù–û–ô –ö–û–ù–¢–ï–ô–ù–ï–† –° –ë–û–ö–û–í–´–ú –ú–ï–ù–Æ -->
    <div class="main-container">
        <!-- –ë–û–ö–û–í–û–ï –ú–ï–ù–Æ -->
        <div class="sidebar">
            <!-- –û–°–ù–û–í–ù–û–ï –ú–ï–ù–Æ –° –ë–õ–û–ö–û–ú –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø –í –û–î–ù–û–ô –°–ï–¢–ö–ï -->
            <div class="dashboard">
                <a href="javascript:void(0)" class="dashboard-item" onclick="showRoomsSection()">
                    <span class="icon">üè†</span>
                    <div class="menu-content">
                        <span class="menu-text">–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞</span>
                        <span class="menu-description">–ù–∞—á–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–∏—Å—Ç–µ–º—ã</span>
                    </div>
                </a>

                <a href="javascript:void(0)" class="dashboard-item" onclick="showBookingSection()">
                    <span class="icon">üìÖ</span>
                    <div class="menu-content">
                        <span class="menu-text">–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ</span>
                        <span class="menu-description">–ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä–µ–≥–æ–≤–æ—Ä–∫—É</span>
                    </div>
                </a>

                <a href="#" class="dashboard-item">
                    <span class="icon">üìç</span>
                    <div class="menu-content">
                        <span class="menu-text">–û—Ñ–∏—Å—ã</span>
                        <span class="menu-description">–ê–¥—Ä–µ—Å–∞ –∏ –∫–∞—Ä—Ç—ã –æ—Ñ–∏—Å–æ–≤</span>
                    </div>
                </a>

                <a href="{% url 'info' %}" class="dashboard-item">
                    <span class="icon">‚ÑπÔ∏è</span>
                    <div class="menu-content">
                        <span class="menu-text">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</span>
                        <span class="menu-description">–ü—Ä–∞–≤–∏–ª–∞ –∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏</span>
                    </div>
                </a>

                <a href="#" class="dashboard-item">
                    <span class="icon">üõ†Ô∏è</span>
                    <div class="menu-content">
                        <span class="menu-text">–¢–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∞</span>
                        <span class="menu-description">–ü–æ–º–æ—â—å –∏ –∫–æ–Ω—Ç–∞–∫—Ç—ã</span>
                    </div>
                </a>


                <!-- –ë–õ–û–ö –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø –í –û–ë–©–ï–ô –°–ï–¢–ö–ï -->
                <div class="user-section">
                    <a href="{% url 'profile' %}" style="text-decoration:none; color:inherit;">
                        <div class="user-main" style="cursor:pointer;">
                            <span class="user-avatar">
                                {% if user.avatar %}
                                <img src="{{ user.avatar.url }}" alt="Avatar" style="width: 24px; height: 24px; border-radius: 50%; object-fit: cover;">
                                {% else %}
                                üë§
                                {% endif %}
                            </span>
                            <div class="user-info">
                                <p class="user-name user-text">{{ user.username }}</p>
                                <p class="user-details user-text">üìß {{ user.email|default:"Email –Ω–µ —É–∫–∞–∑–∞–Ω" }}</p>
                                {% if user.phone %}
                                <p class="user-details user-text">üìû {{ user.phone }}</p>
                                {% endif %}
                                <p class="user-details user-text">üè∑Ô∏è {{ user.role }}</p>
                            </div>
                        </div>
                    </a>
                    <a href="{% url 'logout' %}" class="logout-btn">
                        <span class="user-text">üö™ –í—ã–π—Ç–∏ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞</span>
                    </a>
                </div>
            </div>
        </div>

        <!-- –û–°–ù–û–í–ù–û–ï –°–û–î–ï–†–ñ–ò–ú–û–ï -->
        <div class="content">
            <div class="rooms">
                {% for room in rooms %}
                <div class="room-card">
                    <h3>üö™ {{ room.name }}</h3>
                    <div class="room-features">
                        <span class="feature">üìç {{ room.location }}</span>
                        <span class="feature">üë• –î–æ {{ room.capacity }} —á–µ–ª.</span>
                        <span class="feature">üí∞ {{ room.price_per_hour }} —Ä—É–±/—á–∞—Å</span>
                    </div>
                    <a href="{% url 'room_detail' room.id %}" class="btn">üîç –ü–æ–¥—Ä–æ–±–Ω–µ–µ</a>
                </div>
                {% endfor %}
            </div>
            <!-- ‚òÖ‚òÖ‚òÖ –°–ï–ö–¶–ò–Ø –ë–†–û–ù–ò–†–û–í–ê–ù–ò–Ø (–∏–∑–Ω–∞—á–∞–ª—å–Ω–æ —Å–∫—Ä—ã—Ç–∞) ‚òÖ‚òÖ‚òÖ -->
            <div id="booking-section" style="display: none;">
                <!-- –°—é–¥–∞ –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –∫–æ–Ω—Ç–µ–Ω—Ç –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è -->
            </div>
            <!-- ‚òÖ‚òÖ‚òÖ –°–ï–ö–¶–ò–Ø –£–ü–†–ê–í–õ–ï–ù–ò–Ø –ö–û–ú–ù–ê–¢–ê–ú–ò (–¥–ª—è –∞–¥–º–∏–Ω–∞) ‚òÖ‚òÖ‚òÖ -->
            <div id="room-management-section" style="display: none;">
                <!-- –°—é–¥–∞ –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–Ω–∞—Ç–∞–º–∏ -->
            </div>
        </div>
    </div>
    {% else %}
    <!-- –°–¢–ê–†–´–ô –°–ü–ò–°–û–ö –ö–û–ú–ù–ê–¢ –î–õ–Ø –ù–ï–ê–í–¢–û–†–ò–ó–û–í–ê–ù–ù–´–• -->
    <div class="rooms">
        {% for room in rooms %}
        <div class="room-card">
            <h3>üö™ {{ room.name }}</h3>
            <div class="room-features">
                <span class="feature">üìç {{ room.location }}</span>
                <span class="feature">üë• –î–æ {{ room.capacity }} —á–µ–ª.</span>
                <span class="feature">üí∞ {{ room.price_per_hour }} —Ä—É–±/—á–∞—Å</span>
            </div>
            <a href="{% url 'room_detail' room.id %}" class="btn">üîç –ü–æ–¥—Ä–æ–±–Ω–µ–µ</a>
        </div>
        {% endfor %}
    </div>
    {% endif %}
<script>
function showBookingSection() {
    // –°–∫—Ä—ã–≤–∞–µ–º —Å–ø–∏—Å–æ–∫ –∫–æ–º–Ω–∞—Ç
    document.querySelector('.rooms').style.display = 'none';

    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–µ–∫—Ü–∏—é –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
    document.getElementById('booking-section').style.display = 'block';

    // –ó–∞–≥—Ä—É–∂–∞–µ–º –∫–æ–Ω—Ç–µ–Ω—Ç –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
    loadBookingContent();
}
function showRoomManagement() {
    // –°–∫—Ä—ã–≤–∞–µ–º —Ç–µ–∫—É—â–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç
    document.querySelector('.rooms').style.display = 'none';
    document.getElementById('booking-section').style.display = 'none';

    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–Ω–∞—Ç–∞–º–∏
    document.getElementById('room-management-section').style.display = 'block';
    loadRoomManagement();
}

function loadRoomManagement() {
    document.getElementById('room-management-section').innerHTML = `
        <div class="booking-section">
            <div class="booking-header">
                <h2>üö™ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–≥–æ–≤–æ—Ä–Ω—ã–º–∏ –∫–æ–º–Ω–∞—Ç–∞–º–∏</h2>
                <button class="back-btn" onclick="showRoomsSection()">‚Üê –ù–∞–∑–∞–¥ –∫ –≥–ª–∞–≤–Ω–æ–π</button>
            </div>

            <div style="text-align: right; margin-bottom: 20px;">
                <button class="btn-apply" onclick="showAddRoomForm()">‚ûï –î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–Ω–∞—Ç—É</button>
            </div>

            <div id="rooms-list">
                <!-- –°—é–¥–∞ –∑–∞–≥—Ä—É–∑–∏–º —Å–ø–∏—Å–æ–∫ –∫–æ–º–Ω–∞—Ç -->
                <div style="text-align: center; color: #999; padding: 40px;">
                    –ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ –∫–æ–º–Ω–∞—Ç...
                </div>
            </div>

            <!-- –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–æ–º–Ω–∞—Ç—ã (–∏–∑–Ω–∞—á–∞–ª—å–Ω–æ —Å–∫—Ä—ã—Ç–∞) -->
            <div id="add-room-form" style="display: none;">
                <h3>‚ûï –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –∫–æ–º–Ω–∞—Ç—É</h3>
                <!-- –§–æ—Ä–º–∞ –±—É–¥–µ—Ç –∑–¥–µ—Å—å -->
            </div>
        </div>
    `;

    // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–ø–∏—Å–æ–∫ –∫–æ–º–Ω–∞—Ç
    loadRoomsList();
}

function loadRoomsList() {
    // –ó–∞–≥–ª—É—à–∫–∞ - –ø–æ—Ç–æ–º –∑–∞–º–µ–Ω–∏–º –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π AJAX –∑–∞–ø—Ä–æ—Å
    document.getElementById('rooms-list').innerHTML = `
        <div class="room-card-booking">
            <div class="room-header">
                <div class="room-name">üö™ –ü–µ—Ä–µ–≥–æ–≤–æ—Ä–∫–∞ ‚Ññ1</div>
                <div style="display: flex; gap: 10px;">
                    <button class="btn-apply" style="padding: 5px 10px; font-size: 12px;">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
                    <button class="back-btn" style="padding: 5px 10px; font-size: 12px; background: #dc3545;">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</button>
                </div>
            </div>
            <div><strong>üìç –ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:</strong> –≠—Ç–∞–∂ 3, –æ—Ñ–∏—Å 301</div>
            <div><strong>üë• –í–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:</strong> 6 —á–µ–ª–æ–≤–µ–∫</div>
            <div><strong>üí∞ –¶–µ–Ω–∞:</strong> 1500 —Ä—É–±/—á–∞—Å</div>
            <div><strong>üõ†Ô∏è –û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ:</strong> –ü—Ä–æ–µ–∫—Ç–æ—Ä, —Ç–µ–ª–µ–≤–∏–∑–æ—Ä, –º–∞—Ä–∫–µ—Ä–Ω–∞—è –¥–æ—Å–∫–∞</div>
        </div>

        <div class="room-card-booking">
            <div class="room-header">
                <div class="room-name">üö™ –ü–µ—Ä–µ–≥–æ–≤–æ—Ä–∫–∞ ‚Ññ2</div>
                <div style="display: flex; gap: 10px;">
                    <button class="btn-apply" style="padding: 5px 10px; font-size: 12px;">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
                    <button class="back-btn" style="padding: 5px 10px; font-size: 12px; background: #dc3545;">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</button>
                </div>
            </div>
            <div><strong>üìç –ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:</strong> –≠—Ç–∞–∂ 2, –æ—Ñ–∏—Å 205</div>
            <div><strong>üë• –í–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:</strong> 10 —á–µ–ª–æ–≤–µ–∫</div>
            <div><strong>üí∞ –¶–µ–Ω–∞:</strong> 2000 —Ä—É–±/—á–∞—Å</div>
            <div><strong>üõ†Ô∏è –û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ:</strong> –ü—Ä–æ–µ–∫—Ç–æ—Ä, –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü-—Å–∏—Å—Ç–µ–º–∞</div>
        </div>
    `;
}

function showAddRoomForm() {
    // –ü–æ–∫–∞–∂–µ–º —Ñ–æ—Ä–º—É –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–æ–º–Ω–∞—Ç—ã
    document.getElementById('add-room-form').style.display = 'block';
    document.getElementById('add-room-form').innerHTML = `
        <div style="background: #3a3a3a; padding: 20px; border-radius: 10px;">
            <form onsubmit="addNewRoom(event)">
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px;">
                    <div class="filter-group">
                        <label>–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–Ω–∞—Ç—ã:</label>
                        <input type="text" name="room_name" required placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ü–µ—Ä–µ–≥–æ–≤–æ—Ä–∫–∞ ‚Ññ3">
                    </div>
                    <div class="filter-group">
                        <label>–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:</label>
                        <input type="text" name="location" required placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –≠—Ç–∞–∂ 3, –æ—Ñ–∏—Å 301">
                    </div>
                </div>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px;">
                    <div class="filter-group">
                        <label>–í–º–µ—Å—Ç–∏–º–æ—Å—Ç—å (—á–µ–ª–æ–≤–µ–∫):</label>
                        <input type="number" name="capacity" required min="1" max="50" value="6">
                    </div>
                    <div class="filter-group">
                        <label>–¶–µ–Ω–∞ –∑–∞ —á–∞—Å (—Ä—É–±):</label>
                        <input type="number" name="price" required min="0" step="100" value="1500">
                    </div>
                </div>

                <div class="filter-group" style="margin-bottom: 15px;">
                    <label>–û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ:</label>
                    <textarea name="equipment" rows="3" placeholder="–ü—Ä–æ–µ–∫—Ç–æ—Ä, —Ç–µ–ª–µ–≤–∏–∑–æ—Ä, –º–∞—Ä–∫–µ—Ä–Ω–∞—è –¥–æ—Å–∫–∞..." style="width: 100%; padding: 10px; background: #2d2d2d; border: 1px solid #555; border-radius: 6px; color: #fff;"></textarea>
                </div>

                <div style="display: flex; gap: 10px;">
                    <button type="submit" class="btn-apply">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–æ–º–Ω–∞—Ç—É</button>
                    <button type="button" class="back-btn" onclick="this.parentElement.parentElement.style.display='none'">‚ùå –û—Ç–º–µ–Ω–∞</button>
                </div>
            </form>
        </div>
    `;
}

function addNewRoom(event) {
    event.preventDefault();
    alert('–ö–æ–º–Ω–∞—Ç–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞! (–ø–æ–∫–∞ –∑–∞–≥–ª—É—à–∫–∞)');
    // –ó–¥–µ—Å—å –±—É–¥–µ—Ç AJAX –∑–∞–ø—Ä–æ—Å –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–Ω–∞—Ç—ã
}

function showStatistics() {
    alert('üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±—É–¥–µ—Ç –∑–¥–µ—Å—å!');
}
function showRoomsSection() {
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–ø–∏—Å–æ–∫ –∫–æ–º–Ω–∞—Ç
    document.querySelector('.rooms').style.display = 'block';

    // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Å–µ–∫—Ü–∏–∏
    document.getElementById('booking-section').style.display = 'none';
    document.getElementById('room-management-section').style.display = 'none';
}

function loadBookingContent() {
    // –ó–∞–≥—Ä—É–∂–∞–µ–º –∫–æ–Ω—Ç–µ–Ω—Ç –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —á–µ—Ä–µ–∑ AJAX
    fetch('/booking-content/')
        .then(response => {
            if (!response.ok) {
                throw new Error('Network response was not ok');
            }
            return response.text();
        })
        .then(html => {
            document.getElementById('booking-section').innerHTML = html;
        })
        .catch(error => {
            console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è:', error);
            document.getElementById('booking-section').innerHTML = `
                <div class="booking-section">
                    <div class="booking-header">
                        <h2>üìÖ –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–≥–æ–≤–æ—Ä–æ–∫</h2>
                        <button class="back-btn" onclick="showRoomsSection()">‚Üê –ù–∞–∑–∞–¥ –∫ –∫–æ–º–Ω–∞—Ç–∞–º</button>
                    </div>
                    <div style="text-align: center; color: #dc3545; padding: 40px;">
                        ‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–∏—Å—Ç–µ–º—ã –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
                    </div>
                </div>
            `;
        });
}

// –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –¥–µ–º–æ (–≤—Ä–µ–º–µ–Ω–Ω—ã–µ)
function loadAvailableRooms() {
    const date = document.getElementById('booking-date')?.value;

    if (!date) {
        alert('üìÖ –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É');
        return;
    }

    // –ó–∞–≥–ª—É—à–∫–∞ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏
    const roomsGrid = document.getElementById('rooms-grid');
    if (roomsGrid) {
        roomsGrid.innerHTML = `
            <div class="room-card-booking">
                <div class="room-header">
                    <div class="room-name">üö™ –ü–µ—Ä–µ–≥–æ–≤–æ—Ä–∫–∞ ‚Ññ1</div>
                    <div class="room-capacity">üë• –î–æ 6 —á–µ–ª–æ–≤–µ–∫</div>
                </div>
                <div>üìç –≠—Ç–∞–∂ 3, –æ—Ñ–∏—Å 301</div>
                <div>üí∞ 1500 —Ä—É–±/—á–∞—Å</div>

                <div class="time-slots">
                    <div class="time-slot free" onclick="selectTimeSlot(this)">09:00</div>
                    <div class="time-slot free" onclick="selectTimeSlot(this)">10:00</div>
                    <div class="time-slot booked">11:00</div>
                    <div class="time-slot free" onclick="selectTimeSlot(this)">12:00</div>
                    <div class="time-slot free" onclick="selectTimeSlot(this)">13:00</div>
                </div>

                <button style="margin-top: 15px; width: 100%;"
                        class="btn-apply"
                        onclick="bookRoom(1, '09:00')">
                    üìÖ –ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –≤—ã–±—Ä–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è
                </button>
            </div>
        `;
    }
}

function selectTimeSlot(element) {
    // –°–Ω–∏–º–∞–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ —Å–æ –≤—Å–µ—Ö —Å–ª–æ—Ç–æ–≤
    document.querySelectorAll('.time-slot.free').forEach(slot => {
        slot.classList.remove('selected');
    });
    // –í—ã–¥–µ–ª—è–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–π
    element.classList.add('selected');
}

function bookRoom(roomId, time) {
    alert(`–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–Ω–∞—Ç—ã ${roomId} –Ω–∞ ${time}`);
    // –ó–¥–µ—Å—å –±—É–¥–µ—Ç –≤—ã–∑–æ–≤ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
}
</script>

</body>
</html>