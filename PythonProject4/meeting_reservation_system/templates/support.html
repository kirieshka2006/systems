<!DOCTYPE html>
<html>
<head>
    <title>–¢–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∞</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: #1a1a1a;
            color: #e0e0e0;
            min-height: 100vh;
        }
        .support-container {
            max-width: 1000px;
            margin: 0 auto;
        }
        .support-header {
            background: #2d2d2d;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 25px;
            border: 1px solid #404040;
        }
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.8);
        }

        .modal-content {
            background: #2d2d2d;
            margin: 1% auto;
            padding: 30px;
            border-radius: 15px;
            border: 1px solid #404040;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            position: relative;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        .tab {
            padding: 12px 20px;
            background: #2d2d2d;
            border-radius: 8px;
            cursor: pointer;
            border: 1px solid #404040;
            transition: all 0.3s;
        }
        .tab.active {
            background: #007bff;
            border-color: #007bff;
        }
        .tab-content {
    display: none;           /* ‚òÖ‚òÖ‚òÖ –í–°–ï –≤–∫–ª–∞–¥–∫–∏ —Å–∫—Ä—ã—Ç—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é ‚òÖ‚òÖ‚òÖ */
    background: #2d2d2d;
    padding: 25px;
    border-radius: 10px;
    border: 1px solid #404040;
}

.tab-content.active {
    display: block;          /* ‚òÖ‚òÖ‚òÖ –¢–û–õ–¨–ö–û –∞–∫—Ç–∏–≤–Ω–∞—è –≤–∫–ª–∞–¥–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è ‚òÖ‚òÖ‚òÖ */
}
        .ticket-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        .ticket-item {
            background: #3a3a3a;
            padding: 20px;
            border-radius: 10px;
            border: 1px solid #555;
            cursor: pointer;
            transition: all 0.3s;
        }
        .ticket-item:hover {
            background: #4a4a4a;
            transform: translateX(5px);
        }
        .ticket-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        .ticket-subject {
            font-weight: bold;
            color: #fff;
            font-size: 16px;
        }
        .ticket-status {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
        }

        .ticket-meta {
            color: #ccc;
            font-size: 14px;
            margin-bottom: 10px;
        }
        .ticket-message {
            color: #e0e0e0;
            line-height: 1.5;
        }
        .form-group {
            margin-bottom: 20px;
        }
        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #ccc;
            font-weight: bold;
        }
        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 12px;
            background: #3a3a3a;
            border: 1px solid #555;
            border-radius: 8px;
            color: #fff;
            font-size: 14px;
            box-sizing: border-box;
        }
        .form-group textarea {
            resize: vertical;
            min-height: 120px;
        }
        .btn {
            background: #007bff;
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            transition: background 0.3s;
            text-decoration: none
        }
        .btn:hover {
            background: #0056b3;
        }
        .btn-success {
            background: #28a745;
        }
        .btn-success:hover {
            background: #218838;
        }
        .btn-delete-small:hover {
    transform: translateY(-1px);
    box-shadow: 0 2px 8px rgba(220,53,69,0.3);
}
        .no-tickets {
            text-align: center;
            color: #999;
            padding: 40px;
            font-style: italic;
        }
                .back-btn {
            position: fixed;
            top: 20px;
            left: 20px;
            background: #2d2d2d;
            color: #e0e0e0;
            border: 1px solid #404040;
            border-radius: 8px;
            padding: 10px 15px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
            z-index: 1000;
        }
        .back-btn:hover {
            background: #3a3a3a;
            border-color: #007bff;
        }
        /* –°—Ç–∏–ª–∏ –¥–ª—è FAQ */
        .faq-categories {
            display: flex;
            flex-direction: column;
            gap: 30px;
        }

        .faq-item {
            margin-bottom: 10px;
            border: 1px solid #404040;
            border-radius: 8px;
            overflow: hidden;
        }

        .faq-question {
            background: #3a3a3a;
            padding: 15px 20px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
        }

        .faq-question:hover {
            background: #4a4a4a;
        }

        .faq-toggle {
            transition: transform 0.3s ease;
            color: #007bff;
        }

        .faq-answer {
            display: none;
            background: #2d2d2d;
        }

        .faq-item.active .faq-question {
            background: #007bff;
        }

        .faq-item.active .faq-toggle {
            transform: rotate(90deg);
        }

        .faq-item.active .faq-answer {
            display: block;
        }
        /*–∫–æ–Ω–µ—Ü –ø–æ–¥–¥–µ—Ä–∂–∫–∞*/
    </style>
</head>
<body>
<a href="{% url 'home' %}" class="back-btn">‚Üê –ù–∞–∑–∞–¥ –Ω–∞ –≥–ª–∞–≤–Ω—É—é</a>
    <div class="support-container">
        <div class="support-header">
            <h1>üõ†Ô∏è‚ùìFAQ/–¢–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∞‚ùìüõ†Ô∏è</h1>
            <p>–ó–¥–µ—Å—å –≤—ã –º–æ–∂–µ—Ç–µ –∑–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å –Ω–∞—à–µ–π —Å–ª—É–∂–±–µ –ø–æ–¥–¥–µ—Ä–∂–∫–∏</p>
        </div>

        <div class="tabs">
            <div class="tab active" data-tab="faq" id="tab-faq">‚ùì –ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã (FAQ)</div>
            <div class="tab" data-tab="new-ticket" id="tab-new-ticket">üìù –ù–æ–≤—ã–π –≤–æ–ø—Ä–æ—Å</div>
            <div class="tab" data-tab="my-tickets" id="tab-my-tickets">üì® –ú–æ–∏ –æ–±—Ä–∞—â–µ–Ω–∏—è</div>
            {% if user.role in 'admin manager' %}
            <div class="tab" data-tab="all-tickets" id="tab-all-tickets">üë• –í—Å–µ –æ–±—Ä–∞—â–µ–Ω–∏—è</div>
            {% endif %}
        </div>
<!-- FAQ -->
<div id="faq" class="tab-content active">
    <div style="text-align: center; margin-bottom: 30px;">
        <h3>‚ùì –ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã</h3>
        <p style="color: #ccc; font-size: 16px;">–í—Å—ë —á—Ç–æ –Ω—É–∂–Ω–æ –∑–Ω–∞—Ç—å –æ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏ –ø–µ—Ä–µ–≥–æ–≤–æ—Ä–Ω—ã—Ö –∫–æ–º–Ω–∞—Ç</p>
    </div>

    <!-- –ü–æ–∏—Å–∫ –ø–æ FAQ -->
    <div style="margin-bottom: 30px; position: relative;">
        <input type="text" id="faqSearch" placeholder="üîç –ü–æ–∏—Å–∫ –ø–æ –≤–æ–ø—Ä–æ—Å–∞–º..."
               style="width: 93%; padding: 15px 45px 15px 15px; background: #3a3a3a; border: 2px solid #555;
                      border-radius: 12px; color: #fff; font-size: 16px; transition: all 0.3s ease;">
        <div style="position: absolute; right: 15px; top: 50%; transform: translateY(-50%); color: #999;">
            ‚å®Ô∏è
        </div>
    </div>

    <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 30px;">
        <div style="background: linear-gradient(135deg, #007bff, #0056b3); padding: 20px; border-radius: 12px; text-align: center;">
            <div style="font-size: 24px; margin-bottom: 5px;">üïí</div>
            <div style="font-weight: bold; color: white;">24/7</div>
            <div style="font-size: 12px; color: #e0e0e0;">–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ</div>
        </div>
        <div style="background: linear-gradient(135deg, #28a745, #218838); padding: 20px; border-radius: 12px; text-align: center;">
            <div style="font-size: 24px; margin-bottom: 5px;">üí∞</div>
            <div style="font-weight: bold; color: white;">–û—Ç 500‚ÇΩ/—á–∞—Å</div>
            <div style="font-size: 12px; color: #e0e0e0;">–°—Ç–æ–∏–º–æ—Å—Ç—å</div>
        </div>
        <div style="background: linear-gradient(135deg, #6f42c1, #5a2d91); padding: 20px; border-radius: 12px; text-align: center;">
            <div style="font-size: 24px; margin-bottom: 5px;">üë•</div>
            <div style="font-weight: bold; color: white;">2-20 —á–µ–ª.</div>
            <div style="font-size: 12px; color: #e0e0e0;">–í–º–µ—Å—Ç–∏–º–æ—Å—Ç—å</div>
        </div>
        <div style="background: linear-gradient(135deg, #fd7e14, #e55a00); padding: 20px; border-radius: 12px; text-align: center;">
            <div style="font-size: 24px; margin-bottom: 5px;">‚úÖ</div>
            <div style="font-weight: bold; color: white;">–ú–≥–Ω–æ–≤–µ–Ω–Ω–æ</div>
            <div style="font-size: 12px; color: #e0e0e0;">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ</div>
        </div>
    </div>

        <!-- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ FAQ -->
        <div class="faq-categories">
            <!-- –ë–†–û–ù–ò–†–û–í–ê–ù–ò–ï -->
            <div class="faq-category">
                <h4 style="color: #fff; background: linear-gradient(135deg, #007bff, #0056b3); padding: 15px 20px; border-radius: 10px; margin-bottom: 20px;">
                    üìÖ –ü—Ä–æ—Ü–µ—Å—Å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
                </h4>
                <div class="faq-items">
                    <div class="faq-item">
                        <div class="faq-question" onclick="toggleFAQ(1)">
                            <span>ü§î –ö–∞–∫ –∑–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä–µ–≥–æ–≤–æ—Ä–Ω—É—é –∫–æ–º–Ω–∞—Ç—É?</span>
                            <span class="faq-toggle">‚ñ∂</span>
                        </div>
                        <div class="faq-answer" id="faq-answer-1">
                            <div style="padding: 20px; background: #3a3a3a; border-radius: 8px; margin-top: 10px; line-height: 1.6;">
                                <strong>–ü—Ä–æ—Ü–µ—Å—Å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è:</strong><br><br>
                                1. <strong>–í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–º–Ω–∞—Ç—É</strong> - –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ<br>
                                2. <strong>–ù–∞–∂–º–∏—Ç–µ "–ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å"</strong><br>
                                3. <strong>–£–∫–∞–∂–∏—Ç–µ –¥–∞—Ç—É –∏ –≤—Ä–µ–º—è</strong> –≤—Å—Ç—Ä–µ—á–∏<br>
                                4. <strong>–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</strong> (–æ—Ç 1 —á–∞—Å–∞)<br>
                                5. <strong>–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ</strong><br><br>
                                ‚úÖ –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –æ—Ç–≤–µ—Ç–∞ –º–µ–Ω–µ–¥–∂–µ—Ä–∞!
                            </div>
                        </div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question" onclick="toggleFAQ(2)">
                            <span>‚è∞ –ó–∞ —Å–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏ –º–æ–∂–Ω–æ –∑–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å?</span>
                            <span class="faq-toggle">‚ñ∂</span>
                        </div>
                        <div class="faq-answer" id="faq-answer-2">
                            <div style="padding: 20px; background: #3a3a3a; border-radius: 8px; margin-top: 10px; line-height: 1.6;">
                                <strong>–°—Ä–æ–∫–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è:</strong><br><br>
                                ‚Ä¢ <strong>–ú–∏–Ω–∏–º—É–º</strong> - –∑–∞ 1 —á–∞—Å –¥–æ –Ω–∞—á–∞–ª–∞<br>
                                ‚Ä¢ <strong>–ú–∞–∫—Å–∏–º—É–º</strong> - –∑–∞ 30 –¥–Ω–µ–π –≤–ø–µ—Ä–µ–¥<br>
                                ‚Ä¢ <strong>–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º</strong> –±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –∑–∞ 1-3 –¥–Ω—è<br><br>
                                üö® –í —á–∞—Å—ã –ø–∏–∫ (10:00-12:00, 14:00-16:00) –±—Ä–æ–Ω–∏—Ä—É–π—Ç–µ –∑–∞—Ä–∞–Ω–µ–µ!
                            </div>
                        </div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question" onclick="toggleFAQ(3)">
                            <span>‚ùå –ú–æ–∂–Ω–æ –ª–∏ –æ—Ç–º–µ–Ω–∏—Ç—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ?</span>
                            <span class="faq-toggle">‚ñ∂</span>
                        </div>
                        <div class="faq-answer" id="faq-answer-3">
                            <div style="padding: 20px; background: #3a3a3a; border-radius: 8px; margin-top: 10px; line-height: 1.6;">
                                <strong>–ü–æ–ª–∏—Ç–∏–∫–∞ –æ—Ç–º–µ–Ω—ã:</strong><br><br>
                                ‚úÖ <strong>–ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –æ—Ç–º–µ–Ω–∞</strong> - –∑–∞ 2 —á–∞—Å–∞ –¥–æ –Ω–∞—á–∞–ª–∞<br>
                                ‚ö†Ô∏è <strong>50% —Å—Ç–æ–∏–º–æ—Å—Ç–∏</strong> - –ø—Ä–∏ –æ—Ç–º–µ–Ω–µ –º–µ–Ω–µ–µ —á–µ–º –∑–∞ 2 —á–∞—Å–∞<br>
                                ‚ùå <strong>–ë–µ–∑ –≤–æ–∑–≤—Ä–∞—Ç–∞</strong> - –ø—Ä–∏ –Ω–µ—è–≤–∫–µ<br><br>
                                üí° –î–ª—è –æ—Ç–º–µ–Ω—ã –Ω–∞–ø–∏—à–∏—Ç–µ –≤ —Ç–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫—É
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- –û–ü–õ–ê–¢–ê -->
            <div class="faq-category">
                <h4 style="color: #fff; background: linear-gradient(135deg, #28a745, #218838); padding: 15px 20px; border-radius: 10px; margin-bottom: 20px;">
                    üí≥ –û–ø–ª–∞—Ç–∞ –∏ —Å—Ç–æ–∏–º–æ—Å—Ç—å
                </h4>
                <div class="faq-items">
                    <div class="faq-item">
                        <div class="faq-question" onclick="toggleFAQ(4)">
                            <span>üí∞ –ö–∞–∫ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —Å—Ç–æ–∏–º–æ—Å—Ç—å?</span>
                            <span class="faq-toggle">‚ñ∂</span>
                        </div>
                        <div class="faq-answer" id="faq-answer-4">
                            <div style="padding: 20px; background: #3a3a3a; border-radius: 8px; margin-top: 10px; line-height: 1.6;">
                                <strong>–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–æ–∏–º–æ—Å—Ç–∏:</strong><br><br>
                                ‚Ä¢ <strong>–ü–æ—á–∞—Å–æ–≤–∞—è –æ–ø–ª–∞—Ç–∞</strong> - –æ—Ç 500‚ÇΩ/—á–∞—Å<br>
                                ‚Ä¢ <strong>–ö–∞—Ç–µ–≥–æ—Ä–∏—è –∫–æ–º–Ω–∞—Ç—ã</strong> - —ç–∫–æ–Ω–æ–º/—Å—Ç–∞–Ω–¥–∞—Ä—Ç/–∫–æ–º—Ñ–æ—Ä—Ç/VIP<br>
                                ‚Ä¢ <strong>–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</strong> - –æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ –¥–æ 30 –º–∏–Ω—É—Ç<br>
                                ‚Ä¢ <strong>–î–æ–ø. —É—Å–ª—É–≥–∏</strong> - –ø—Ä–æ–µ–∫—Ç–æ—Ä, —Ñ–ª–∏–ø—á–∞—Ä—Ç –∏ —Ç.–¥.<br><br>
                                üí∞ –ò—Ç–æ–≥–æ–≤–∞—è —Å—É–º–º–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø–µ—Ä–µ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º
                            </div>
                        </div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question" onclick="toggleFAQ(5)">
                            <span>üíµ –ö–∞–∫–∏–µ —Å–ø–æ—Å–æ–±—ã –æ–ø–ª–∞—Ç—ã –¥–æ—Å—Ç—É–ø–Ω—ã?</span>
                            <span class="faq-toggle">‚ñ∂</span>
                        </div>
                        <div class="faq-answer" id="faq-answer-5">
                            <div style="padding: 20px; background: #3a3a3a; border-radius: 8px; margin-top: 10px; line-height: 1.6;">
                                <strong>–î–æ—Å—Ç—É–ø–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã –æ–ø–ª–∞—Ç—ã:</strong><br><br>
                                ‚Ä¢ üí≥ <strong>–ë–∞–Ω–∫–æ–≤—Å–∫–∞—è –∫–∞—Ä—Ç–∞</strong> (Visa, MasterCard, –ú–ò–†)<br>
                                ‚Ä¢ üì± <strong>–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã–µ –∫–æ—à–µ–ª—å–∫–∏</strong> (–ÆMoney, Qiwi)<br>
                                ‚Ä¢ üè¢ <strong>–ë–µ–∑–Ω–∞–ª–∏—á–Ω—ã–π —Ä–∞—Å—á–µ—Ç</strong> –¥–ª—è —é—Ä. –ª–∏—Ü<br>
                                ‚Ä¢ üí∞ <strong>–ù–∞–ª–∏—á–Ω—ã–µ</strong> –≤ –¥–µ–Ω—å –≤—Å—Ç—Ä–µ—á–∏<br><br>
                                üîí –í—Å–µ –ø–ª–∞—Ç–µ–∂–∏ –∑–∞—â–∏—â–µ–Ω—ã SSL-—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ–º
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- –û–ë–û–†–£–î–û–í–ê–ù–ò–ï -->
            <div class="faq-category">
                <h4 style="color: #fff; background: linear-gradient(135deg, #fd7e14, #e55a00); padding: 15px 20px; border-radius: 10px; margin-bottom: 20px;">
                    üõ†Ô∏è –û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
                </h4>
                <div class="faq-items">
                    <div class="faq-item">
                        <div class="faq-question" onclick="toggleFAQ(6)">
                            <span>üéØ –ö–∞–∫–æ–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ –µ—Å—Ç—å –≤ –∫–æ–º–Ω–∞—Ç–∞—Ö?</span>
                            <span class="faq-toggle">‚ñ∂</span>
                        </div>
                        <div class="faq-answer" id="faq-answer-6">
                            <div style="padding: 20px; background: #3a3a3a; border-radius: 8px; margin-top: 10px; line-height: 1.6;">
                                <strong>–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ:</strong><br><br>
                                ‚Ä¢ ü™ë <strong>–ú–µ–±–µ–ª—å</strong> - —Å—Ç–æ–ª—ã, —ç—Ä–≥–æ–Ω–æ–º–∏—á–Ω—ã–µ –∫—Ä–µ—Å–ª–∞<br>
                                ‚Ä¢ üì∫ <strong>–¢–µ—Ö–Ω–∏–∫–∞</strong> - –ø—Ä–æ–µ–∫—Ç–æ—Ä, —ç–∫—Ä–∞–Ω, TV<br>
                                ‚Ä¢ üì° <strong>–ò–Ω—Ç–µ—Ä–Ω–µ—Ç</strong> - Wi-Fi 100 –ú–±–∏—Ç/—Å<br>
                                ‚Ä¢ ‚òï <strong>–ö—É–ª–µ—Ä</strong> - –≤–æ–¥–∞, —á–∞–π, –∫–æ—Ñ–µ<br>
                                ‚Ä¢ üñäÔ∏è <strong>–ö–∞–Ω—Ü–µ–ª—è—Ä–∏—è</strong> - —Ñ–ª–∏–ø—á–∞—Ä—Ç, –º–∞—Ä–∫–µ—Ä—ã<br><br>
                                üîç –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –≤ –æ–ø–∏—Å–∞–Ω–∏–∏ –∫–∞–∂–¥–æ–π –∫–æ–º–Ω–∞—Ç—ã
                            </div>
                        </div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question" onclick="toggleFAQ(7)">
                            <span>üîå –ï—Å—Ç—å –ª–∏ —Ä–æ–∑–µ—Ç–∫–∏ –∏ USB-–ø–æ—Ä—Ç—ã?</span>
                            <span class="faq-toggle">‚ñ∂</span>
                        </div>
                        <div class="faq-answer" id="faq-answer-7">
                            <div style="padding: 20px; background: #3a3a3a; border-radius: 8px; margin-top: 10px; line-height: 1.6;">
                                <strong>–≠–ª–µ–∫—Ç—Ä–æ–ø–∏—Ç–∞–Ω–∏–µ:</strong><br><br>
                                ‚úÖ <strong>–†–æ–∑–µ—Ç–∫–∏</strong> - 4-8 —à—Ç. –≤ –∫–∞–∂–¥–æ–π –∫–æ–º–Ω–∞—Ç–µ<br>
                                ‚úÖ <strong>USB-–ø–æ—Ä—Ç—ã</strong> - –¥–ª—è –∑–∞—Ä—è–¥–∫–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤<br>
                                ‚úÖ <strong>–£–¥–ª–∏–Ω–∏—Ç–µ–ª–∏</strong> - –ø–æ –∑–∞–ø—Ä–æ—Å—É<br>
                                ‚úÖ <strong>220V</strong> - —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ<br><br>
                                üí° –í—Å–µ —Ä–æ–∑–µ—Ç–∫–∏ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω—ã –≤ —É–¥–æ–±–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- –ü–†–ê–í–ò–õ–ê -->
            <div class="faq-category">
                <h4 style="color: #fff; background: linear-gradient(135deg, #6f42c1, #5a2d91); padding: 15px 20px; border-radius: 10px; margin-bottom: 20px;">
                    üìã –ü—Ä–∞–≤–∏–ª–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
                </h4>
                <div class="faq-items">
                    <div class="faq-item">
                        <div class="faq-question" onclick="toggleFAQ(8)">
                            <span>‚è±Ô∏è –ß—Ç–æ –µ—Å–ª–∏ —è –æ–ø–æ–∑–¥–∞—é –Ω–∞ –≤—Å—Ç—Ä–µ—á—É?</span>
                            <span class="faq-toggle">‚ñ∂</span>
                        </div>
                        <div class="faq-answer" id="faq-answer-8">
                            <div style="padding: 20px; background: #3a3a3a; border-radius: 8px; margin-top: 10px; line-height: 1.6;">
                                <strong>–ü–æ–ª–∏—Ç–∏–∫–∞ –æ–ø–æ–∑–¥–∞–Ω–∏–π:</strong><br><br>
                                ‚Ä¢ ‚è∞ <strong>–î–æ 15 –º–∏–Ω—É—Ç</strong> - –∫–æ–º–Ω–∞—Ç–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è<br>
                                ‚Ä¢ ‚ö†Ô∏è <strong>15-30 –º–∏–Ω—É—Ç</strong> - –≤—Ä–µ–º—è –Ω–µ –ø—Ä–æ–¥–ª–µ–≤–∞–µ—Ç—Å—è<br>
                                ‚Ä¢ ‚ùå <strong>–ë–æ–ª–µ–µ 30 –º–∏–Ω—É—Ç</strong> - –±—Ä–æ–Ω—å –∞–Ω–Ω—É–ª–∏—Ä—É–µ—Ç—Å—è<br><br>
                                üìû –ü—Ä–∏ –æ–ø–æ–∑–¥–∞–Ω–∏–∏ –ø—Ä–µ–¥—É–ø—Ä–µ–¥–∏—Ç–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
                            </div>
                        </div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question" onclick="toggleFAQ(9)">
                            <span>üë• –ú–æ–∂–Ω–æ –ª–∏ –ø—Ä–∏–≤–µ—Å—Ç–∏ –±–æ–ª—å—à–µ –ª—é–¥–µ–π?</span>
                            <span class="faq-toggle">‚ñ∂</span>
                        </div>
                        <div class="faq-answer" id="faq-answer-9">
                            <div style="padding: 20px; background: #3a3a3a; border-radius: 8px; margin-top: 10px; line-height: 1.6;">
                                <strong>–í–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –∫–æ–º–Ω–∞—Ç:</strong><br><br>
                                ‚Ä¢ ‚úÖ <strong>+1-2 —á–µ–ª–æ–≤–µ–∫–∞</strong> - –æ–±—ã—á–Ω–æ –≤–æ–∑–º–æ–∂–Ω–æ<br>
                                ‚Ä¢ ‚ö†Ô∏è <strong>–ë–æ–ª—å—à–µ –ª–∏–º–∏—Ç–∞</strong> - —Ç—Ä–µ–±—É–µ—Ç—Å—è —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ<br>
                                ‚Ä¢ üîí <strong>–ü—Ä–æ—Ç–∏–≤–æ–ø–æ–∂–∞—Ä–Ω—ã–µ –Ω–æ—Ä–º—ã</strong> - —Å—Ç—Ä–æ–≥–æ —Å–æ–±–ª—é–¥–∞—é—Ç—Å—è<br><br>
                                üìû –£—Ç–æ—á–Ω—è–π—Ç–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —É –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- CTA –ë–ª–æ–∫ -->
        <div style="background: linear-gradient(135deg, #2d2d2d, #404040); padding: 30px; border-radius: 15px; border: 2px solid #007bff; text-align: center; margin-top: 40px;">
            <h4 style="color: #fff; margin-bottom: 15px;">üí¨ –ù–µ –Ω–∞—à–ª–∏ –æ—Ç–≤–µ—Ç?</h4>
            <p style="color: #ccc; margin-bottom: 20px;">–ù–∞—à–∞ —Ç–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∞ –æ—Ç–≤–µ—Ç–∏—Ç –Ω–∞ –ª—é–±–æ–π –≤–∞—à –≤–æ–ø—Ä–æ—Å</p>
            <button onclick="switchToTab('new-ticket')" style="background: linear-gradient(135deg, #007bff, #0056b3); color: white; padding: 15px 30px; border: none; border-radius: 8px; cursor: pointer; font-size: 16px; font-weight: bold; transition: all 0.3s ease;">
                üìù –ó–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å –≤ —Ç–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫—É
            </button>
        </div>
    </div>
        <!-- –§–û–†–ú–ê –ù–û–í–û–ì–û –í–û–ü–†–û–°–ê -->
        <div id="new-ticket" class="tab-content active">
            <h3>üìù –ó–∞–¥–∞—Ç—å –Ω–æ–≤—ã–π –≤–æ–ø—Ä–æ—Å</h3>
            <form method="POST" action="{% url 'create_ticket' %}">
                {% csrf_token %}
                <div class="form-group">
                    <label>–¢–µ–º–∞ –≤–æ–ø—Ä–æ—Å–∞</label>
                    <input type="text" name="subject" required placeholder="–û–ø–∏—à–∏—Ç–µ –∫—Ä–∞—Ç–∫–æ —Å—É—Ç—å –ø—Ä–æ–±–ª–µ–º—ã">
                </div>
                <div class="form-group">
                    <label>–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ</label>
                    <textarea name="message" required placeholder="–û–ø–∏—à–∏—Ç–µ –≤–∞—à—É –ø—Ä–æ–±–ª–µ–º—É –ø–æ–¥—Ä–æ–±–Ω–æ..."></textarea>
                </div>
                <button type="submit" class="btn btn-success">üì§ –û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤–æ–ø—Ä–æ—Å</button>
            </form>
        </div>

        <!-- –ú–û–ò –û–ë–†–ê–©–ï–ù–ò–Ø -->
        <div id="my-tickets" class="tab-content">
            <h3>üì® –ú–æ–∏ –æ–±—Ä–∞—â–µ–Ω–∏—è</h3>
            <div class="ticket-list">
                {% for ticket in my_tickets %}
                <div class="ticket-item" onclick="openTicket({{ ticket.id }})">
                    <div class="ticket-header">
                        <div class="ticket-subject">{{ ticket.subject }}</div>
                        <div class="ticket-status status-{{ ticket.status }}">{{ ticket.get_status_display }}</div>
                    </div>
                    <div class="ticket-meta">
                        üìÖ {{ ticket.created_at|date:"d.m.Y H:i" }} |
                        üí¨ –û—Ç–≤–µ—Ç–æ–≤: {{ ticket.responses.count }}
                    </div>
                    <div class="ticket-message">{{ ticket.message|truncatewords:30 }}</div>
                </div>
                {% empty %}
                <div class="no-tickets">
                    üì≠ –£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –æ–±—Ä–∞—â–µ–Ω–∏–π –≤ —Ç–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫—É
                </div>
                {% endfor %}
            </div>
        </div>

        {% if user.role in 'admin manager' %}
        <!-- –í–°–ï –û–ë–†–ê–©–ï–ù–ò–Ø (–¥–ª—è –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤ –∏ –∞–¥–º–∏–Ω–æ–≤) -->
        <div id="all-tickets" class="tab-content">
            <h3>üë• –í—Å–µ –æ–±—Ä–∞—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</h3>
            <div class="ticket-list">
                {% for ticket in all_tickets %}
                <div class="ticket-item">
                    <div class="ticket-header">
                        <div class="ticket-subject" style="flex: 1; cursor: pointer;" onclick="openTicket({{ ticket.id }})">
                            üë§ {{ ticket.user.username }}: {{ ticket.subject }}
                        </div>
                        <div style="display: flex; gap: 10px; align-items: center;">
                            <div class="ticket-status status-{{ ticket.status }}">{{ ticket.get_status_display }}</div>
                            {% if ticket.status != 'open' %}
                            <button class="btn-delete-small" onclick="event.stopPropagation(); confirmDeleteFromList({{ ticket.id }})"
                                    style="background: #dc3545; color: white; padding: 6px 10px; border: none;
                                           border-radius: 6px; cursor: pointer; font-size: 11px; font-weight: bold;
                                           transition: all 0.3s ease;">
                                üóëÔ∏è –£–¥–∞–ª–∏—Ç—å
                            </button>
                            {% endif %}
                        </div>
                    </div>
                    <div style="cursor: pointer;" onclick="openTicket({{ ticket.id }})">
                        <div class="ticket-meta">
                            üìÖ {{ ticket.created_at|date:"d.m.Y H:i" }} |
                            üí¨ –û—Ç–≤–µ—Ç–æ–≤: {{ ticket.responses.count }}
                        </div>
                        <div class="ticket-message">{{ ticket.message|truncatewords:30 }}</div>
                    </div>
                </div>
                {% empty %}
                <div class="no-tickets">
                    üì≠ –ù–µ—Ç –æ–±—Ä–∞—â–µ–Ω–∏–π –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
                </div>
                {% endfor %}
            </div>
        </div>
        {% endif %}
    </div>

    <!-- –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –ü–†–û–°–ú–û–¢–†–ê –¢–ò–ö–ï–¢–ê -->
    <div id="ticketModal" class="modal">
        <div class="modal-content" style="max-width: 800px; max-height: 90vh; overflow-y: auto;">
            <span class="close" onclick="closeTicketModal()" style="float: right; font-size: 24px; cursor: pointer; color: #ccc;">&times;</span>
            <div id="ticketModalContent">
                <!-- –°—é–¥–∞ –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ç–∏–∫–µ—Ç–∞ -->
            </div>
        </div>
    </div>

    <script>
        // –§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –Ω–∞ –¥—Ä—É–≥—É—é –≤–∫–ª–∞–¥–∫—É
function switchToTab(tabName) {
    // –°–Ω–∏–º–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–µ –∫–ª–∞—Å—Å—ã
    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
    document.querySelectorAll('.tab-content').forEach(c => {
        c.classList.remove('active');
        c.style.display = 'none'; // ‚òÖ‚òÖ‚òÖ –î–û–ë–ê–í–¨ –≠–¢–£ –°–¢–†–û–ö–£ ‚òÖ‚òÖ‚òÖ
    });

    // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –Ω—É–∂–Ω—É—é –≤–∫–ª–∞–¥–∫—É
    const tab = document.querySelector(`[data-tab="${tabName}"]`);
    const content = document.getElementById(tabName);

    if (tab && content) {
        tab.classList.add('active');
        content.classList.add('active');
        content.style.display = 'block'; // ‚òÖ‚òÖ‚òÖ –î–û–ë–ê–í–¨ –≠–¢–£ –°–¢–†–û–ö–£ ‚òÖ‚òÖ‚òÖ
    }

    // ‚òÖ‚òÖ‚òÖ –û–ë–ù–û–í–õ–Ø–ï–ú URL –° –Ø–ö–û–†–ï–ú ‚òÖ‚òÖ‚òÖ
    window.history.pushState(null, null, `#${tabName}`);
}
        function toggleFAQ(faqId) {
    const faqItem = document.querySelector(`#faq-answer-${faqId}`).parentElement;
    const isActive = faqItem.classList.contains('active');

    // –ó–∞–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ FAQ
    document.querySelectorAll('.faq-item').forEach(item => {
        item.classList.remove('active');
    });

    // –û—Ç–∫—Ä—ã–≤–∞–µ–º —Ç–µ–∫—É—â–∏–π –µ—Å–ª–∏ –±—ã–ª –∑–∞–∫—Ä—ã—Ç
    if (!isActive) {
        faqItem.classList.add('active');
    }
}

// –ü–æ–∏—Å–∫ –ø–æ FAQ
document.getElementById('faqSearch').addEventListener('input', function(e) {
    const searchTerm = e.target.value.toLowerCase();
    const faqItems = document.querySelectorAll('.faq-item');

    faqItems.forEach(item => {
        const question = item.querySelector('.faq-question').textContent.toLowerCase();
        if (question.includes(searchTerm)) {
            item.style.display = 'block';
        } else {
            item.style.display = 'none';
        }
    });
});

// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–∫—Ä—ã–≤–∞–µ–º –ø–µ—Ä–≤—ã–π FAQ –≤ –∫–∞–∂–¥–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
document.addEventListener('DOMContentLoaded', function() {
    document.querySelectorAll('.faq-category').forEach(category => {
        const firstFaq = category.querySelector('.faq-item');
        if (firstFaq) {
            firstFaq.classList.add('active');
        }
    });
});
        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–∞–±–æ–≤
        document.querySelectorAll('.tab').forEach(tab => {
            tab.addEventListener('click', () => {
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));

                tab.classList.add('active');
                document.getElementById(tab.dataset.tab).classList.add('active');
            });
        });

        // –û—Ç–∫—Ä—ã—Ç–∏–µ —Ç–∏–∫–µ—Ç–∞
        function openTicket(ticketId) {
            fetch(`/support/ticket/${ticketId}/`)
                .then(response => response.text())
                .then(html => {
                    document.getElementById('ticketModalContent').innerHTML = html;
                    document.getElementById('ticketModal').style.display = 'block';
                })
                .catch(error => {
                    console.error('–û—à–∏–±–∫–∞:', error);
                });
        }

        function closeTicketModal() {
            document.getElementById('ticketModal').style.display = 'none';
        }

        // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –µ–≥–æ
        window.onclick = function(event) {
            const modal = document.getElementById('ticketModal');
            if (event.target === modal) {
                closeTicketModal();
            }
        }
        function confirmDeleteFromList(ticketId) {
    if (confirm('‚ùå –£–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç —Ç–∏–∫–µ—Ç?\n\n–≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å!')) {
        fetch(`/support/ticket/${ticketId}/delete/`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'X-CSRFToken': document.querySelector('[name=csrfmiddlewaretoken]').value
            }
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                showNotification('‚úÖ –¢–∏–∫–µ—Ç —É–¥–∞–ª–µ–Ω!', 'success');
                setTimeout(() => location.reload(), 1000);
            } else {
                showNotification('‚ùå ' + data.error, 'error');
            }
        })
        .catch(error => {
            console.error('–û—à–∏–±–∫–∞:', error);
            showNotification('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏', 'error');
        });
    }
}

// –§—É–Ω–∫—Ü–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (–µ—Å–ª–∏ –µ—â–µ –Ω–µ—Ç)
function showNotification(message, type) {
    const notification = document.createElement('div');
    notification.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        padding: 15px 20px;
        border-radius: 8px;
        color: white;
        font-weight: bold;
        z-index: 10000;
        ${type === 'success' ? 'background: #28a745;' : 'background: #dc3545;'}
    `;
    notification.textContent = message;
    document.body.appendChild(notification);

    setTimeout(() => {
        notification.remove();
    }, 3000);
}
    </script>
<!-- –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –î–õ–Ø –û–¢–í–ï–¢–ê -->
<div id="responseModal" class="modal">
    <div class="modal-content" style="max-width: 700px;">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px;">
            <h3 style="margin: 0; color: #fff;">üí¨ –û—Ç–≤–µ—Ç –Ω–∞ –æ–±—Ä–∞—â–µ–Ω–∏–µ</h3>
            <span class="close" onclick="closeResponseModal()" style="font-size: 28px; cursor: pointer; color: #ccc; padding: 5px;">&times;</span>
        </div>

        <div style="background: #3a3a3a; padding: 20px; border-radius: 10px; margin-bottom: 25px;">
            <strong style="color: #fff;">–û–±—Ä–∞—â–µ–Ω–∏–µ:</strong>
            <div style="color: #ccc; margin-top: 10px;" id="responseTicketSubject"></div>
        </div>

        <form method="POST" id="responseForm">
            {% csrf_token %}
            <input type="hidden" name="ticket_id" id="responseTicketId">
            <div class="form-group">
                <label style="display: block; margin-bottom: 10px; color: #ccc; font-weight: bold;">–í–∞—à –æ—Ç–≤–µ—Ç</label>
                <textarea name="response" required
                          placeholder="–ù–∞–ø–∏—à–∏—Ç–µ –ø–æ–¥—Ä–æ–±–Ω—ã–π –æ—Ç–≤–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é..."
                          style="width: 100%; min-height: 200px; padding: 15px; background: #3a3a3a; border: 1px solid #555; border-radius: 10px; color: #fff; font-size: 14px; line-height: 1.5; resize: vertical;"></textarea>
            </div>
            <div style="display: flex; gap: 15px; justify-content: flex-end; margin-top: 25px;">
                <button type="button" class="btn-cancel" onclick="closeResponseModal()" style="background: #6c757d; color: white; padding: 12px 24px; border: none; border-radius: 8px; cursor: pointer;">
                    ‚ùå –û—Ç–º–µ–Ω–∞
                </button>
                <button type="submit" class="btn-send" style="background: #28a745; color: white; padding: 12px 30px; border: none; border-radius: 8px; cursor: pointer; font-weight: bold;">
                    üì§ –û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç–≤–µ—Ç
                </button>
            </div>
        </form>
    </div>
</div>

<script>
// –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –æ—Ç–≤–µ—Ç–∞
function showResponseForm(ticketId, ticketSubject) {
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–µ –∑–∞–∫—Ä—ã—Ç –ª–∏ —Ç–∏–∫–µ—Ç
    fetch(`/support/ticket/${ticketId}/check-status/`)
        .then(response => response.json())
        .then(data => {
            if (data.status === 'closed') {
                alert('‚ùå –≠—Ç–æ—Ç —Ç–∏–∫–µ—Ç —É–∂–µ –∑–∞–∫—Ä—ã—Ç. –ù–æ–≤—ã–µ –æ—Ç–≤–µ—Ç—ã –Ω–µ –ø—Ä–∏–Ω–∏–º–∞—é—Ç—Å—è.');
                return;
            }

            // –†–∞–∑—Ä–µ—à–∞–µ–º –æ—Ç–∫—Ä—ã—Ç—å —Ñ–æ—Ä–º—É –æ—Ç–≤–µ—Ç–∞
            document.getElementById('responseTicketSubject').textContent = ticketSubject;
            document.getElementById('responseTicketId').value = ticketId;
            document.getElementById('responseForm').action = `/support/ticket/${ticketId}/`;
            document.getElementById('responseModal').style.display = 'block';
        })
        .catch(error => {
            console.error('–û—à–∏–±–∫–∞:', error);
        });
}

function closeResponseModal() {
    document.getElementById('responseModal').style.display = 'none';
}

// –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã –æ—Ç–≤–µ—Ç–∞
document.getElementById('responseForm').addEventListener('submit', function(e) {
    e.preventDefault();

    const submitBtn = this.querySelector('button[type="submit"]');
    const originalText = submitBtn.innerHTML;

    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
    submitBtn.innerHTML = '‚è≥ –û—Ç–ø—Ä–∞–≤–∫–∞...';
    submitBtn.disabled = true;

    const formData = new FormData(this);

    fetch(this.action, {
        method: 'POST',
        body: formData,
        headers: {
            'X-CSRFToken': document.querySelector('[name=csrfmiddlewaretoken]').value
        }
    })
    .then(response => {
        if (response.ok) {
            alert('‚úÖ –û—Ç–≤–µ—Ç —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω!');
            closeResponseModal();
            closeTicketModal();
            setTimeout(() => location.reload(), 1000);
        } else {
            throw new Error('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏');
        }
    })
    .catch(error => {
        console.error('–û—à–∏–±–∫–∞:', error);
        alert('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –æ—Ç–≤–µ—Ç–∞');
        submitBtn.innerHTML = originalText;
        submitBtn.disabled = false;
    });
});

// –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –æ—Ç–≤–µ—Ç–∞ –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –µ–≥–æ
window.onclick = function(event) {
    const responseModal = document.getElementById('responseModal');
    if (event.target === responseModal) {
        closeResponseModal();
    }
}

// –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∞–≤–∏—à–∏ ESC –¥–ª—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –æ—Ç–≤–µ—Ç–∞
// –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —Å–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–µ –≤–∫–ª–∞–¥–∫–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
document.addEventListener('DOMContentLoaded', function() {
    // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ –≤–∫–ª–∞–¥–∫–∏
    document.querySelectorAll('.tab-content').forEach(content => {
        content.style.display = 'none';
    });

    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—É—é
    const activeTab = document.querySelector('.tab.active');
    if (activeTab) {
        const activeContent = document.getElementById(activeTab.dataset.tab);
        if (activeContent) {
            activeContent.style.display = 'block';
        }
    }

    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –≤–∫–ª–∞–¥–æ–∫
    document.querySelectorAll('.tab').forEach(tab => {
        tab.addEventListener('click', () => {
            // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ –≤–∫–ª–∞–¥–∫–∏
            document.querySelectorAll('.tab-content').forEach(content => {
                content.style.display = 'none';
            });

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é
            const content = document.getElementById(tab.dataset.tab);
            if (content) {
                content.style.display = 'block';
            }
        });
    });
});
</script>
</body>
</html>