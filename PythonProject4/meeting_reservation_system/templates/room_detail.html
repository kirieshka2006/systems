<!DOCTYPE html>
<html>
<head>
    <title>–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ {{ room.name }}</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: #1a1a1a;
            color: #e0e0e0;
            min-height: 100vh;
        }
        .back-button {
            position: fixed;
            top: 20px;
            left: 20px;
            background: #2d2d2d;
            color: #e0e0e0;
            border: 1px solid #404040;
            border-radius: 8px;
            padding: 10px 15px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
            z-index: 1000;
        }
        .back-button:hover {
            background: #3a3a3a;
            border-color: #007bff;
        }
        .booking-container {
            display: flex;
            gap: 30px;
            max-width: 1200px;
            margin: 0 auto;
        }
        .left-column {
            flex: 1;
        }
        .equipment-columns {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-top: 15px;
        }

        .equipment-column {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .equipment-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 12px;
            background: #3a3a3a;
            border-radius: 6px;
            border-left: 3px solid #007bff;
        }

        .equipment-icon {
            color: #28a745;
            font-weight: bold;
            font-size: 16px;
        }
        .right-column {
            flex: 1;
            background: #2d2d2d;
            padding: 25px;
            border-radius: 15px;
            border: 1px solid #404040;
        }
        .room-image {
            margin-top: 13.5px;
            width: 105%;
            margin-left: -8.48%;
            border-radius: 10px;
            margin-bottom: 20px;
            transform: scale(1.059);
        }
        .tabs {
            margin-top: 20px;
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
            margin-left: -11.5%
        }
        .tab {
            padding: 12px 20px;
            background: #2d2d2d;
            border-radius: 8px;
            cursor: pointer;
            border: 1px solid #404040;
            transition: all 0.3s;

        }
        .tab.active {
            background: #007bff;
            border-color: #007bff;
        }
        .tab:hover {
            background: #3a3a3a;
        }
        .tab-content {
            display: none;
            background: #2d2d2d;
            padding: 20px;
            border-radius: 10px;
            border: 1px solid #404040;
            margin-left: -11.5%
        }
        .tab-content.active {
            display: block;
        }

        /* –ö–∞–ª–µ–Ω–¥–∞—Ä—å */
        .calendar {
            background: #3a3a3a;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        .calendar-nav {
            background: none;
            border: none;
            color: #fff;
            font-size: 18px;
            cursor: pointer;
            padding: 5px 10px;
        }
        .calendar-nav:hover {
            background: #4a4a4a;
            border-radius: 5px;
        }
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
        }
        .calendar-day {
            padding: 10px;
            text-align: center;
            border-radius: 5px;
            cursor: pointer;
        }
        .calendar-day:hover {
            background: #4a4a4a;
        }
        .calendar-day.selected {
            background: #007bff;
        }
        .calendar-day.other-month {
            color: #666;
        }

        /* –í—Ä–µ–º—è */
        .time-section {
            margin: 25px 0;
        }
        .time-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin-top: 15px;
        }
        .time-slot {
            padding: 12px;
            text-align: center;
            background: #3a3a3a;
            border-radius: 8px;
            cursor: pointer;
            border: 1px solid #555;
            transition: all 0.3s;
        }
        .time-slot:hover {
            background: #4a4a4a;
        }
        .time-slot.selected {
            background: #28a745;
            border-color: #28a745;
        }
        .time-slot.booked {
            background: #dc3545;
            cursor: not-allowed;
            opacity: 0.6;
        }

        /* –§–æ—Ä–º–∞ */
        .contact-form {
            margin-top: 25px;
        }
        .form-group {
            margin-bottom: 20px;
        }
        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #ccc;
            font-weight: bold;
        }
        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            background: #3a3a3a;
            border: 1px solid #555;
            border-radius: 8px;
            color: #fff;
            font-size: 14px;
            box-sizing: border-box;
        }
        .form-group textarea {
            resize: vertical;
            min-height: 80px;
        }
        .btn-submit {
            background: #28a745;
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            width: 100%;
            transition: background 0.3s;
        }
        .btn-submit:hover {
            background: #218838;
        }
    </style>
</head>
<body>
<!-- –ö–Ω–æ–ø–∫–∞ –Ω–∞–∑–∞–¥ -->
    <button class="back-button" onclick="window.history.back()">‚Üê –ù–∞–∑–∞–¥</button>

    <div class="booking-container">
        <!-- –õ–ï–í–ê–Ø –ö–û–õ–û–ù–ö–ê -->
        <div class="left-column">
            <img src="{{ room.image.url }}" alt="{{ room.name }}" class="room-image">

            <div class="tabs">
                <div class="tab active" data-tab="services">–£—Å–ª—É–≥–∏</div>
                <div class="tab" data-tab="price">–¶–µ–Ω–∞</div>
                <div class="tab" data-tab="location">–ö–∞–∫ –¥–æ–±—Ä–∞—Ç—å—Å—è</div>
                <div class="tab" data-tab="reviews">–û—Ç–∑—ã–≤—ã</div>
                <div class="tab" data-tab="features">–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏</div>
            </div>

            <div id="services" class="tab-content active">
                <h3>–£—Å–ª—É–≥–∏ –∏ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ</h3>
                {% if room.equipment %}
                    <div class="equipment-columns">
                        <div class="equipment-column">
                            {% for item in room.get_equipment_columns.0 %}
                            <div class="equipment-item">
                                <span class="equipment-icon">‚úì</span>
                                {{ item }}
                            </div>
                            {% endfor %}
                        </div>
                        <div class="equipment-column">
                            {% for item in room.get_equipment_columns.1 %}
                            <div class="equipment-item">
                                <span class="equipment-icon">‚úì</span>
                                {{ item }}
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                {% else %}
                    <p>–û–ø–∏—Å–∞–Ω–∏–µ —É—Å–ª—É–≥ –ø–æ—è–≤–∏—Ç—Å—è —Å–∫–æ—Ä–æ...</p>
                {% endif %}
            </div>

            <div id="price" class="tab-content">
                <h3>–°—Ç–æ–∏–º–æ—Å—Ç—å</h3>
                <p><strong>{{ room.price_per_hour }} —Ä—É–±/—á–∞—Å</strong></p>
                <p>–ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è: 1 —á–∞—Å</p>
            </div>

            <div id="location" class="tab-content">
                <h3>–ö–∞–∫ –¥–æ–±—Ä–∞—Ç—å—Å—è</h3>
                <p>{{ room.location }}</p>
                <p>üöá –ë–ª–∏–∂–∞–π—à–µ–µ –º–µ—Ç—Ä–æ: —É—Ç–æ—á–Ω—è–µ—Ç—Å—è</p>
            </div>

            <div id="reviews" class="tab-content">
                <h3>–û—Ç–∑—ã–≤—ã</h3>
                <p>–ó–¥–µ—Å—å –±—É–¥—É—Ç –æ—Ç–∑—ã–≤—ã –æ –ø–µ—Ä–µ–≥–æ–≤–æ—Ä–Ω–æ–π –∫–æ–º–Ω–∞—Ç–µ</p>
            </div>

            <div id="features" class="tab-content">
                <h3>–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏</h3>
                <p>üë• –í–º–µ—Å—Ç–∏–º–æ—Å—Ç—å: –¥–æ {{ room.capacity }} —á–µ–ª–æ–≤–µ–∫</p>
                <p>üéØ –ö–∞—Ç–µ–≥–æ—Ä–∏—è:
                    {% if room.category == 'economy' %}üü¢ –≠–∫–æ–Ω–æ–º
                    {% elif room.category == 'standard' %}üîµ –°—Ç–∞–Ω–¥–∞—Ä—Ç
                    {% elif room.category == 'comfort' %}üü° –ö–æ–º—Ñ–æ—Ä—Ç
                    {% elif room.category == 'vip' %}üü£ VIP
                    {% elif room.category == 'luxury' %}üî¥ –õ—é–∫—Å
                    {% endif %}
                </p>
            </div>
        </div>

        <!-- –ü–†–ê–í–ê–Ø –ö–û–õ–û–ù–ö–ê - –§–û–†–ú–ê –ë–†–û–ù–ò–†–û–í–ê–ù–ò–Ø -->
        <div class="right-column">
            <h2 style="margin-top: 0; color: #fff;">–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ {{ room.name }}</h2>

            <form class="booking-form" method="POST">
                {% csrf_token %}

                <!-- –ö–∞–ª–µ–Ω–¥–∞—Ä—å -->
                <div class="calendar">
                    <div class="calendar-header">
                        <button type="button" class="calendar-nav" onclick="changeMonth(-1)">‚Üê</button>
                        <h3 id="currentMonth" style="margin: 0;">–ù–æ—è–±—Ä—å 2024</h3>
                        <button type="button" class="calendar-nav" onclick="changeMonth(1)">‚Üí</button>
                    </div>
                    <div class="calendar-grid" id="calendarGrid">
                        <!-- –ö–∞–ª–µ–Ω–¥–∞—Ä—å –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ JavaScript -->
                    </div>
                </div>

                <!-- –í—ã–±–æ—Ä –≤—Ä–µ–º–µ–Ω–∏ -->
                <div class="time-section">
                    <h3>–í—ã–±–µ—Ä–∏—Ç–µ –≤—Ä–µ–º—è</h3>
                    <div class="time-grid" id="timeGrid">
                        <!-- –í—Ä–µ–º—è –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ JavaScript -->
                    </div>
                </div>

                <!-- –ö–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ -->
                <div class="contact-form">
                    <h3>–ö–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</h3>

                    <div class="form-group">
                        <label>–§–ò–û</label>
                        <input type="text" name="full_name" required placeholder="–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤–∏—á">
                    </div>

                    <div class="form-group">
                        <label>–¢–µ–ª–µ—Ñ–æ–Ω</label>
                        <input type="tel" name="phone" required placeholder="+7 (999) 999-99-99">
                    </div>

                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" name="email" required placeholder="example@mail.ru">
                    </div>

                    <div class="form-group">
                        <label>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –∑–∞—è–≤–∫–µ</label>
                        <textarea name="comment" placeholder="–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤—Å—Ç—Ä–µ—á–µ..."></textarea>
                    </div>

                    <button type="submit" class="btn-submit">–û–¢–ü–†–ê–í–ò–¢–¨ –ó–ê–ü–†–û–°</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // –¢–ê–ë–´
        document.querySelectorAll('.tab').forEach(tab => {
            tab.addEventListener('click', () => {
                // –£–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —É –≤—Å–µ—Ö —Ç–∞–±–æ–≤
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));

                // –î–æ–±–∞–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å –∫ –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É —Ç–∞–±—É
                tab.classList.add('active');
                document.getElementById(tab.dataset.tab).classList.add('active');
            });
        });

        // –ö–ê–õ–ï–ù–î–ê–†–¨
        let currentDate = new Date();

        function renderCalendar() {
            const monthNames = ["–Ø–Ω–≤–∞—Ä—å", "–§–µ–≤—Ä–∞–ª—å", "–ú–∞—Ä—Ç", "–ê–ø—Ä–µ–ª—å", "–ú–∞–π", "–ò—é–Ω—å", "–ò—é–ª—å", "–ê–≤–≥—É—Å—Ç", "–°–µ–Ω—Ç—è–±—Ä—å", "–û–∫—Ç—è–±—Ä—å", "–ù–æ—è–±—Ä—å", "–î–µ–∫–∞–±—Ä—å"];
            document.getElementById('currentMonth').textContent = `${monthNames[currentDate.getMonth()]} ${currentDate.getFullYear()}`;

            const calendarGrid = document.getElementById('calendarGrid');
            calendarGrid.innerHTML = '';

            // –ó–∞–≥–æ–ª–æ–≤–∫–∏ –¥–Ω–µ–π –Ω–µ–¥–µ–ª–∏
            const days = ['–ü–Ω', '–í—Ç', '–°—Ä', '–ß—Ç', '–ü—Ç', '–°–±', '–í—Å'];
            days.forEach(day => {
                const dayElement = document.createElement('div');
                dayElement.textContent = day;
                dayElement.style.fontWeight = 'bold';
                dayElement.style.color = '#ccc';
                calendarGrid.appendChild(dayElement);
            });

            // –î–Ω–∏ –º–µ—Å—è—Ü–∞
            const firstDay = new Date(currentDate.getFullYear(), currentDate.getMonth(), 1);
            const lastDay = new Date(currentDate.getFullYear(), currentDate.getMonth() + 1, 0);

            // –ü—É—Å—Ç—ã–µ —è—á–µ–π–∫–∏ –ø–µ—Ä–µ–¥ –ø–µ—Ä–≤—ã–º –¥–Ω–µ–º
            for (let i = 0; i < (firstDay.getDay() + 6) % 7; i++) {
                const emptyDay = document.createElement('div');
                emptyDay.classList.add('calendar-day', 'other-month');
                calendarGrid.appendChild(emptyDay);
            }

            // –î–Ω–∏ —Ç–µ–∫—É—â–µ–≥–æ –º–µ—Å—è—Ü–∞
            for (let day = 1; day <= lastDay.getDate(); day++) {
                const dayElement = document.createElement('div');
                dayElement.textContent = day;
                dayElement.classList.add('calendar-day');

                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –ø—Ä–æ—à–µ–¥—à–∞—è –ª–∏ –¥–∞—Ç–∞
                const today = new Date();
                const cellDate = new Date(currentDate.getFullYear(), currentDate.getMonth(), day);
                if (cellDate < today) {
                    dayElement.style.opacity = '0.5';
                    dayElement.style.cursor = 'not-allowed';
                } else {
                    dayElement.addEventListener('click', () => selectDate(day));
                }

                calendarGrid.appendChild(dayElement);
            }
        }

        function changeMonth(direction) {
            currentDate.setMonth(currentDate.getMonth() + direction);
            renderCalendar();
        }

        function selectDate(day) {
            document.querySelectorAll('.calendar-day').forEach(d => d.classList.remove('selected'));
            event.target.classList.add('selected');

            // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–æ—Å—Ç—É–ø–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
            generateTimeSlots();
        }

        // –ì–ï–ù–ï–†–ê–¶–ò–Ø –í–†–ï–ú–ï–ù–ò
        function generateTimeSlots() {
            const timeGrid = document.getElementById('timeGrid');
            timeGrid.innerHTML = '';

            const timeSlots = ['09:00', '10:00', '11:00', '12:00', '13:00', '14:00', '15:00', '16:00', '17:00', '18:00', '19:00', '20:00'];

            timeSlots.forEach(time => {
                const timeSlot = document.createElement('div');
                timeSlot.textContent = time;
                timeSlot.classList.add('time-slot');

                // –°–ª—É—á–∞–π–Ω—ã–º –æ–±—Ä–∞–∑–æ–º –ø–æ–º–µ—á–∞–µ–º –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —Å–ª–æ—Ç—ã –∫–∞–∫ –∑–∞–Ω—è—Ç—ã–µ (–¥–ª—è –¥–µ–º–æ)
                if (Math.random() > 0.7) {
                    timeSlot.classList.add('booked');
                } else {
                    timeSlot.addEventListener('click', () => {
                        document.querySelectorAll('.time-slot').forEach(ts => ts.classList.remove('selected'));
                        timeSlot.classList.add('selected');
                    });
                }

                timeGrid.appendChild(timeSlot);
            });
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        renderCalendar();
        generateTimeSlots();

        // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–µ–≥–æ–¥–Ω—è—à–Ω—é—é –¥–∞—Ç—É –∫–∞–∫ –º–∏–Ω–∏–º–∞–ª—å–Ω—É—é –¥–ª—è –ø–æ–ª—è –¥–∞—Ç—ã
        const today = new Date().toISOString().split('T')[0];
        document.querySelector('input[type="date"]').min = today;
    </script>
</body>
</html>